<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live IPL Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Video Player -->
    <div class="w-full max-w-2xl mt-6 p-4 bg-black rounded-xl shadow-xl">
        <h2 class="text-xl font-semibold text-blue-400 mb-2">Live IPL Streaming</h2>
        <video id="videoPlayer" class="w-full rounded-lg shadow-lg" controls autoplay>
            <source src="https://v18tataplaysyndication.akamaized.net/bpk-tv/Sports18_1_HD_voot_MOB/output03/hdntl=exp=1742737928~acl=%2f*~data=hdntl~hmac=997439ed3aa23998094bf472b25ff9f25932e5a336ab2b96eb0ca41de41292a7/Sports18_1_HD_voot_MOB-audio_108038_eng=108000-video=2297600.m3u8" type="application/x-mpegURL">
            Your browser does not support the video tag.
        </video>
    </div>

    <!-- Poll Section -->
    <div class="w-full max-w-md text-center p-6 bg-gray-800 rounded-xl shadow-xl mt-6">
        <h2 class="text-xl font-semibold text-blue-400 mb-2">Vote for Today's Match</h2>
        <p class="text-lg text-white mb-4">Who will win?</p>
        <div class="flex justify-center space-x-4">
            <button onclick="vote('team1')" class="px-6 py-3 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition duration-300">Team 1</button>
            <button onclick="vote('team2')" class="px-6 py-3 bg-green-500 text-white rounded-full shadow-lg hover:bg-green-600 transition duration-300">Team 2</button>
        </div>
        <p id="poll-results" class="text-lg text-white mt-4">Fetching results...</p>
    </div>

    <script>
        // Your Firebase Config (Replace with your details)
        const firebaseConfig = {
            apiKey: "AIzaSyAWSCNBBYL8dZ3ANqxaD8nLSCbiUbLYso4",
            authDomain: "iplakshay-83010.firebaseapp.com",
            databaseURL: "https://iplakshay-83010-default-rtdb.firebaseio.com",
            projectId: "iplakshay-83010",
            storageBucket: "iplakshay-83010.firebasestorage.app",
            messagingSenderId: "794853134144",
            appId: "1:794853134144:web:8cb8f67b35e017612e74a5"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function vote(team) {
            let lastVoteTime = localStorage.getItem('lastVoteTime') || 0;
            let currentTime = new Date().getTime();
            if (currentTime - lastVoteTime < 10000) {
                alert('You can vote again after 10 seconds!');
                return;
            }
            localStorage.setItem('lastVoteTime', currentTime);

            // Update vote count in Firebase
            db.ref('poll/' + team).transaction(currentVotes => (currentVotes || 0) + 1);
        }

        function updateResults() {
            db.ref('poll').on('value', snapshot => {
                let data = snapshot.val() || {};
                let team1Votes = data.team1 || 0;
                let team2Votes = data.team2 || 0;
                let totalVotes = team1Votes + team2Votes;

                let team1Percent = totalVotes === 0 ? 0 : ((team1Votes / totalVotes) * 100).toFixed(1);
                let team2Percent = totalVotes === 0 ? 0 : ((team2Votes / totalVotes) * 100).toFixed(1);

                document.getElementById('poll-results').innerText = `Team 1: ${team1Percent}% | Team 2: ${team2Percent}%`;
            });
        }

        updateResults();
    </script>

</body>
</html>
